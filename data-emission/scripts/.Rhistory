rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.22'
setwd("C:/Users/au583430/OneDrive - Aarhus universitet/Documents/GitHub/Pedersen-2024-MAG/scripts")
rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.22'
library(data.table)
sink('../logs/versions.txt')
print(sessionInfo())
sink()
??sink
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
install.packages(R.utils)
install.packages("R.utils")
library(data.table)
library(R.utils)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
View(idat)
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
pdat$app.date <- as.character(pdat$app.start, format = '%Y-%m-%d')
pdat <- subset(pdat, proj == 'eGylle' & app.date %in% c('2021-08-11', '2021-08-20', '2022-01-05') & meas.tech != 'DTM' & is.na(meas.tech.det))
# Drop non-eGylle obs from emis interval data
idat <- subset(idat, pmid %in% unique(pdat$pmid))
pdat <- subset(pdat, proj == 'eGylle' & app.date %in% c('2021-08-11', '2021-08-20', '2022-01-05') & meas.tech != 'DTM' & is.na(meas.tech.det))
# Download latest ALFAM2 data, subset to this study, and save copy
rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.22'
# Alternative below to get particular commit (if not yet in release)
#ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/bf608a10d324444627acf35f0aadeaced5f008c9/'
#rtag <- ''
source('packages.R')
source('load.R')
rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.22'
source('packages.R')
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
pdat$app.date <- as.character(pdat$app.start, format = '%Y-%m-%d')
View(pdat)
pdat <- subset(pdat, proj == 'MAG')
setwd("C:/Users/au583430/OneDrive - Aarhus universitet/Documents/GitHub/Pedersen-2024-MAG/scripts")
rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.23'
source('packages.R')
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
pdat$app.date <- as.character(pdat$app.start, format = '%Y-%m-%d')
pdat <- subset(pdat, proj == 'MAG')
source('packages.R')
source('load.R')
pdat <- subset(pdat, proj == 'eGylle')
View(pdat)
source('packages.R')
source('load.R')
pdat <- subset(pdat, proj == 'MAG')
View(idat)
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
View(pdat)
rm(list = ls())
# Set release tag for download
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/'
rtag <- 'v2.32'
source('packages.R')
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/commit/91bb37fb91867dd62434aafc681f5f8f71b5b73d'
rtag <- ''
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
View(idat)
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/commit/91bb37fb91867dd62434aafc681f5f8f71b5b73d'
rtag <- ''
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
p <- paste0(ghpath, rtag)
p
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/commit/91bb37fb91867dd62434aafc681f5f8f71b5b73d'
rtag <- '2.32'
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/commit/91bb37fb91867dd62434aafc681f5f8f71b5b73d/'
rtag <- '2.32'
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/91bb37fb91867dd62434aafc681f5f8f71b5b73d/'
rtag <- '2.32'
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
rm(list = ls())
source('packages.R')
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/91bb37fb91867dd62434aafc681f5f8f71b5b73d/'
rtag <- '2.32'
p <- paste0(ghpath, rtag)
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/91bb37fb91867dd62434aafc681f5f8f71b5b73d/'
rtag <- ' '
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/blob/master/data-submitted/03/AU/ALFAM2_template_7.0_MAGspring23_231117.xlsx'
rtag <- ' '
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
# Get file with data version number
download.file(paste0(p, '/data-output/03/data_version.txt'), destfile = '../logs/data_version.txt')
rm(list = ls())
source('packages.R')
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'data-submitted/03/AU/ALFAM2_template_7.0_MAGspring23_231117.xlsx'
rtag <- ' '
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Download latest ALFAM2 data, subset to this study, and save copy
rm(list = ls())
source('packages.R')
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/data-submitted/03/AU/ALFAM2_template_7.0_MAGspring23_231117.xlsx'
rtag <- ' '
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
# Alternative below to get particular commit (if not yet in release)
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/91bb37fb91867dd62434aafc681f5f8f71b5b73/'
rtag <- ''
'
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
View(idat)
View(idat)
View(pdat)
idat <- subset(idat, proj == 'MAG')
idat <- subset(idat, proj = 'MAG')
idat <- data.frame(fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz')))
pdat <- data.frame(fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz')))
idat <- subset(idat, proj = 'MAG')
idat <- subset(idat, proj == 'MAG')
names(idat)
pdat <- subset(idat, proj == 'MAG')
pdat <- subset(pdat, proj == 'MAG')
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
pdat <- subset(pdat, proj == 'MAG')
# Drop non-eGylle obs from emis interval data
idat <- subset(idat, pmid %in% unique(pdat$pmid))
View(pdat)
# Download latest ALFAM2 data, subset to this study, and save copy
rm(list = ls())
source('packages.R')
ghpath <- 'https://github.com/sashahafner/ALFAM2-data/raw/91bb37fb91867dd62434aafc681f5f8f71b5b73/'
rtag <- ''
p <- paste0(ghpath, rtag)
idat <- fread(paste0(p, '/data-output/03/ALFAM2_interval.csv.gz'))
pdat <- fread(paste0(p, '/data-output/03/ALFAM2_plot.csv.gz'))
pdat <- subset(pdat, proj == 'MAG')
# Drop non-eGylle obs from emis interval data
idat <- subset(idat, pmid %in% unique(pdat$pmid))
View(idat)
View(pdat)
pdat <- subset(pdat, exper != c('testA', 'testB', 'testC'))
View(pdat)
pdat <- subset(pdat, exper =! c('testA', 'testB', 'testC'))
pdat <- subset(pdat, ! exper == c('testA', 'testB', 'testC'))
?subset
pdat <- subset(pdat, ! exper == c(testA, testB, testC))
pdat <- subset(pdat, exper != c(testA, testB, testC))
pdat <- subset(pdat, t.start.p > 2023-01-01 00:00:00))
pdat <- subset(pdat, t.start.p > '2023-01-01 00:00:00'))
pdat <- subset(pdat, t.start.p > '2023-01-01 00:00:00')
# Drop non-relevant obs from emis interval data
idat <- subset(idat, pmid %in% unique(pdat$pmid))
rm(list = ls())
source('packages.R')
source('load.R')
source('subset.R')
